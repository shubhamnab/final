<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
   
  <title>Buzz4Health</title>
 <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
  <link rel="stylesheet" href="css/styles.css" />
 
  <script src="js/jquery-2.0.3.min.js" type="text/javascript"></script>
  <script src="js/jquery-1.8.2.min.js"></script>
  <script src="js/jquery.mobile-1.2.0.min.js"></script>
  <script src="js/jqm.autoComplete-1.5.2-min.js"></script>
  <script src="js/code.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="style/demo.css">
  <link rel="stylesheet" href="style/avgrund.css">
  <script>
			function openDialog() {
				Avgrund.show( "#default-popup" );
			}
			function openSecondDialog() {
				Avgrund.show( "#second-popup" );
			}
			
			function closeDialog() {
				Avgrund.hide();
			}
		</script>
  
<style>
#mainPage{
min-height:0px !important;
background-color: white;
}

.follow_b
{
border:#dedede solid 5px;
background-color: #7aa76d;
color:#fff;
margin-left:20px;
margin-top:20px
 font-size:12px;
 font-weight:;
  padding-left:8px ;
  padding-right:8px ;
   -moz-border-radius: 20px;
   -webkit-border-radius: 20px; 
}
.youfollowing_b
{
 font-size:20px; color:#006600; font-weight:bold;
}
.remove_b
{
border:#dedede solid 5px;
background-color:#7aa76d;
color:#CC3333;
 font-size:12px;
 padding-left:8px ;
  padding-right:8px ;
   font-weight:;
 margin-left:70%;
   -moz-border-radius: 20px;
   -webkit-border-radius: 20px; 
}
</style>

<!--for follow and unfollow -->
<script type="text/javascript">
$(function() {
$(".follow").click(function(){
var element = $(this);
console.log("shuba");
var I = document.getElementById("follo").innerHTML ;
console.log(I);
console.log("hello");
var A = localStorage.getItem("auth_token");
console.log(A);
//var u = http://meerkat.buzz4healthtest.c66.me/users/" + I + "/follow.json,
//console.log(u);

 //console.log(localStorage.getItem("auth_token")); // fetch auth_token
  //console.log(localStorage.getItem("login"));
$("#loading").html('<img src="images/loader.gif" align="absmiddle">&nbsp;loading...');

 $.ajax({
   type: "POST",
   url:  "http://meerkat.buzz4healthtest.c66.me/users/" + I + "/follow.json",
   data: JSON.stringify({ auth_token : A }),
   contentType: 'application/json',
   dataType: 'json',
   cache: false,
   crossDomain: true,
   async: false,
   success: function() {
   $("#loading").ajaxComplete(function(){}).slideUp();
   
    $('#follow1').fadeOut();
$('#remove1').fadeIn();
   console.log("fade");
   }  
 });
 
  
	
return false;

});

});
</script>

<script type="text/javascript">

$(function() {
$(".remove").click(function(){
var element = $(this);
var I = document.getElementById("follo").innerHTML ;
console.log(I);
console.log("hello");
var A = localStorage.getItem("auth_token");
console.log(A);
$("#loading").html('<img src="images/loader.gif" align="absmiddle">&nbsp;loading...');

 $.ajax({
   type: "POST",
   url: "http://meerkat.buzz4healthtest.c66.me/users/" + I + "/unfollow.json",
   data: JSON.stringify({ auth_token : A }),
   contentType: 'application/json',
   dataType: 'json',
   cache: false,
   crossDomain: true,
   async: false,
   success: function(){
   $("#loading").ajaxComplete(function()
	 {}).slideUp();
   
    $('#remove1').fadeOut();
    $('#follow1').fadeIn();
   }
 });
 
  
	
return false;

});

});
</script>
</head>

<body style="background-color:#ffffff">
<img src="images/buzz-logo.png" width="60%">
<hr style="height:4px; background-color:#0C9; border-style:none; width:100%;">
<div style="width:96%;">
<div style="float:left; margin-left:10px;margin-top:8.5%">
<ul style="list-style-type:none; padding:0; margin:0; position:absolute; z-index:1000000">
<li id="mainmenu"><img src="images/nav_icon.png">
<ul id="menu" style="list-style-type:none; padding:0; display:none; border-style:groove; border-radius:5px; height:auto;; background-color:#fff;">
<li onclick="home()" style="font-size:18px; "><img src="images/a.png" width="20%" height="20%" style=" vertical-align:middle;"><a href="#" style="text-decoration:none; vertical-align:middle;">Home</a></li>
<li onclick="edit()" style="font-size:18px; "><hr><img src="images/b.jpg" width="20%" height="20%" style=" vertical-align:middle;"><a href="#" style="text-decoration:none; vertical-align:middle;">Edit Profile</a></li>
<li onclick="test()" style="font-size:18px; "><hr><img src="images/c.png" width="20%" height="20%" style=" vertical-align:middle;"><a href="#" style="text-decoration:none; vertical-align:middle;">Test Paper</a></li>
<li style="font-size:18px;"><hr><img src="images/d.png" width="20%" height="20%" style=" vertical-align:middle;"><a href="#" style="text-decoration:none; vertical-align:middle;">My Stats</a></li>
<li onclick="logout()" style="font-size:18px;"><hr><img src="images/e.png" width="20%" height="20%" style=" vertical-align:middle;"><a href="#" style="text-decoration:none; vertical-align:middle;">Log Out</a></li>
</ul>
</li>
</ul>
</div>

<script>
function test() {
    window.location.href = "index1.html";
}

</script>
<script>
function logout()
{
//window.localStorage.remove();
window.localStorage. clear() ;
window.location.href = "index.html";
}
</script>
<script>
function edit(){
window.location.href="edit.html";
}
</script>
<script>
function home(){
window.location.href="profile.html";
}
</script>
  
    <br><br><br><br>
	  
	  <div id="mainPage1">
    <div data-role="page" id="mainPage" style="margin-top:22%">
		
			<p>
				<input type="text" id="searchBox" placeholder="Search" style="width:80%;margin-left:15%">
				<ul id="suggestions" data-role="listview" data-inset="true" style="background-color:#ffffff"></ul>
			</p>

		
	</div>
	</div>
	
	<aside id="default-popup" class="avgrund-popup">
	<h>You are Following:</h>
<div id="hemraj" style="width: 70%;"></div>
<button onclick="javascript:closeDialog();">Close</button>
</aside>
<article class="avgrund-contents">
</article>

		
<div class="avgrund-cover"></div>
<script type="text/javascript" src="avgrund.js"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>


<aside id="second-popup" class="avgrund-popup">
<h>Your Followers:</h>
			<div id="gaurav" style="width: 70%;"></div>
			<button onclick="javascript:closeDialog();">Close</button>
		</aside>
		
	
	


	<table style="width:100%;margin-top:-5%">
  <tr>
    <th style="width:50px;height:50px"><div id="photo" style="margin-left:5%"></div></th>		
  <th id="name" style="margin-top:0%"></th>
  </tr>
  <tr>
    <td><button id="followers" style="" onclick="javascript:openSecondDialog();" >    Followers</button><div id="followers"></div></td>
    <td><button id="followings" onclick="javascript:openDialog();">       Followings</button><div id="followings"></div></td>
  </tr>
</table>
	
	
<div id="write"></div>
<div id="loading"></div>
<div id="follo" visibility: hidden></div>
<div id="follow1"><a href="#" class="follow" id="" ><br><span class="follow_b"> Follow </span><br><br></a></div>
<div id="remove1" style="display:none"><span class="youfollowing_b"> You are Following </span><a href="#" class="remove" id="1"><span class="remove_b"> unfollow </span></a><br><br></div>
  


<div id="header">

<hr>
<h>Doctor Education</h>
<div id="doc_education"></div>
<hr>
<h>Hospital Affiliations</h>
<div id="hospital_affiliation"></div>
<hr>
<h>Awards & Publications</h>
<div id="awards"></div>
<hr>
<h>Areas of Interest</h>
<div id="tags" style="width:100%"></div>
<hr>
<h>Specializations</h>
<div id="specialization"></div>
<hr>


</div>


<script>
	
	var b = [] ;
	var c = "";

    var listItems13 = [];

       
        var as = "";
   var E = window.location.search;
   console.log(E);
   var F = E.replace('?','');
   console.log(F);
  var followersAPI = "http://meerkat.buzz4healthtest.c66.me/users/"+F+"/follows.json?sort=following";
 // console.log(followersAPI);
 $(document).ready(function() {
     
    $.getJSON("http://meerkat.buzz4healthtest.c66.me/users/"+F+"/follows.json?sort=following", function(jd) {
              for(i=0;i<jd.length;i++){
			  c = jd[i].login;
			  
			 // d = String.fromCharCode(c);
			  
                  b[i] = "'"+c+"'";     
if (jd[i].avatar_url == null)
{
jd[i].avatar_url = 'images/doctor.png';
}				  
              listItems13[i]= "<table><tr onclick=change("+b[i]+");><td ><img src="+jd[i].avatar_url+"  height='40px' width='40px' border='1'></img><br></td><td><a href= # >" + jd[i].name + "</a><br>"+jd[i].bio+"</td></tr><hr></table ><hr>";     
                  
              }
   //     console.log(b);
   //var xy =     localStorage.getItem('abc');
        //console.log(xy);
       // console.log(listItems11);
      //  length_tags = jd.length;
        $("#hemraj").html(listItems13);
    
     });
     
   
     });
	 function change(as) {
	 //console.log(as);
	 //console.log(as[0])
	// for(i=1;i<(as.length-1);i++) {
	// abc[i-1] = as[i];
	// }
	 window.location.href = "profile_others.html?"+as;
	 
	 }
	
//console.log(b);
//console.log(listItems11);
//location.reload();
	

	
	
	</script>
	
	<script>
	var b = [] ;
	var c = "";

    var listItems14 = [];

       
        var as = "";
   var E = window.location.search;
  // console.log(E);
   var F = E.replace('?','');
   //console.log(F);
  var followersAPI = "http://meerkat.buzz4healthtest.c66.me/users/"+F+"/follows.json?sort=followers";
  //console.log(followersAPI);
 $(document).ready(function() {
     
    $.getJSON("http://meerkat.buzz4healthtest.c66.me/users/"+F+"/follows.json?sort=followers", function(jd) {
              for(i=0;i<jd.length;i++){
			  c = jd[i].login;
			  
			 // d = String.fromCharCode(c);
			  
                  b[i] = "'"+c+"'"; 
if (jd[i].avatar_url == null)
{
jd[i].avatar_url = 'images/doctor.png';
}				  
              listItems14[i]= "<table><tr onclick=change("+b[i]+");><td ><img src="+jd[i].avatar_url+"  height='40px' width='40px' border='1'></img><br></td><td><a href= # >" + jd[i].name + "</a><br>"+jd[i].bio+"</td></tr><hr></table ><hr>";     
                  
              }
    //    console.log(b);
   //var xy =     localStorage.getItem('abc');
        //console.log(xy);
       // console.log(listItems11);
      //  length_tags = jd.length;
        $("#gaurav").html(listItems14);
    
     });
     
   
     });
	 function change(as) {
	 //console.log(as);
	 //console.log(as[0])
	// for(i=1;i<(as.length-1);i++) {
	// abc[i-1] = as[i];
	// }
	 window.location.href = "profile_others.html?"+as;
	 
	 }
	
//console.log(b);
//console.log(listItems11);
//location.reload();

	
	
	</script>
	 




	

	           
	<div>
    <footer style="margin-top:50%">
        <a href="#" target="_blank" style="margin-left:13%">About Us</a><a href="#" target="_blank" style="margin-left:13%">Setting</a><a href="#" target="_blank" style="margin-left:13%">Rate App</a>
    
    	<p style="margin-left:5%">Copyright @ 2013 Whitebutter pvt Ltd</p>
    </footer>
  </div>
 

<script type="text/javascript">
   $(document).ready(function(){
  $("#mainmenu").click(function(){
    $("#menu").toggle();
  });
});
</script>


<script type="text/javascript" language="javascript">
$(document).ready(function() {
    //  $("#driver").click(function(event){
	//var S = window.location.search;
	 var S = window.location.search;
   console.log(S);
   var Q = S.replace('?','');
   console.log(Q);
          $.getJSON('http://meerkat.buzz4healthtest.c66.me/api/v1/users/'+Q+'.json', function(jd) {
              $('#name').html('<p>  ' + jd.user.name + '</p>');
             $('#follo').append(jd.user._id);
             $('#name').append('<p>  ' + jd.user.bio+ '</p>');
			 $('#name').append('<p>  ' + jd.user.doc_professional_statement+ '</p>');
			 
			 
			 
			 
			 $('#followers').append('<p>  ' + jd.user.followers_count+ '</p>');
			 $('#followings').append('<p> ' + jd.user.following_count+ '</p>');
			 
			 
			 //for(i=0;i<jd.user.specializations[1].name.length;i++) {
			 //$('#specialization').append('<table><tr><td>' + jd.user.specializations[1].name[i] + '</td></tr></table>');
			 //}
			 $('#specialization').append('<p> Specialization: ' + jd.user.specializations[1].name+ '</p>');
			 
			 //Areas of Interest:
			 for(i=0;i<jd.tags.length;i++) {
			 $('#tags').append('<table><tr><td>' + jd.tags[i] + '</td></tr></table>');
			 }
			 //$('#tags').append('<p> ' + jd.tags+ '</p>');
			 
			 //doctor Education
			 for(i=0;i<jd.user.doc_education.length;i++) {
			 $('#doc_education').append('<table><tr><td>' + jd.user.doc_education[i] + '</td></tr></table>');
			 }
			 //$('#doc_education').append('<p>  ' + jd.user.doc_education+ '</p>');
			 
			 //Hospital affiliation
			  for(i=0;i<jd.user.hospital_affiliations.length;i++) {
			 $('#hospital_affiliation').append('<table><tr><td>' + jd.user.hospital_affiliations[i] + '</td></tr></table>');
			 }
			//$('#hospital_affiliation').append('<p>  ' + jd.user.hospital_affiliations+ '</p>');
			 
			 for(i=0;i<jd.user.doc_award_and_publication.length;i++) {
			 $('#awards').append('<table><tr><td>' + jd.user.doc_award_and_publication[i] + '</td></tr></table>');
			 }
			//$('#awards').append('<p>  ' + jd.user.doc_award_and_publication+ '</p>');
			
			 
             $("<img height='100px' width='100px' border='1'></img>").attr("src", jd.user.avatar_url).appendTo("#photo");
          });
   //   });
   });
   </script>
<script>
var listItems= [];
var listItems1= [];
    var l;
		$("#mainPage1").bind("pageshow", function(e) {
                     
                    
                    
            var speclizationAPI = "http://meerkat.buzz4healthtest.c66.me/users.json";
  $.getJSON( speclizationAPI, {
    format: "json"
  })
    .done(function( data ) {
      $.each( data, function( i, item ) {
           listItems[i] = {label: item.name, value: item.login}
         //  console.log(listItems);
          
        if ( i === data.length-1) {
          return false;
        }
      });
       
        l=data.length;
     //   console.log(l);
        
      
    });
           
			$("#searchBox").autocomplete({
				target: $('#suggestions'),
				source: listItems,
				source1: listItems1,
				//link: 'profile_others.html?',
				minLength: 1,
				
				matchFromStart: false,
                callback: function(e) {
			var $a = $(e.currentTarget); // access the selected item
                    var $b = $a.context.dataset.autocomplete;
                   // var $c = $b.value;
          //         console.log($a);
                    console.log($b);
                //    var abc = '';
                //    abc = $b.value;
                //    console.log(abc);
                   // console.log($c);
                    
		for(i=0;i<$b.length;i++) {
        while($b[i] != ',') {
        i=i+1;
        var j =i;
        }
            var str = '';
        for(i=j+11;$b[i] != '}';i++) {
         str = str + $b[i-1];
        }
        }
                    console.log(str);
                    
			$("#suggestions").autocomplete('clear'); // clear the listview
           window.location.href= 'profile_others.html?' + str;
		}
               // console.log(link);
			});
            
            });
        
	</script>
</body>
</html>


